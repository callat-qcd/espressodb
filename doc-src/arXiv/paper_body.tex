\hypertarget{summary}{%
\section{Summary}\label{summary}}

Leadership computing facilities around the world support cutting-edge
scientific research across a broad spectrum of disciplines including
understanding climate change \cite{Kurth\_2018}, combating opioid
addiction \cite{Joubert:2018:AOE:3291656.3291732}, or simulating the
decay of a neutron \cite{Berkowitz:2018gqe}. While the increase in
computational power has allowed scientists to better evaluate the
underlying model, the size of these computational projects have grown to
a point where a framework is desired to facilitate managing the
workflow. A typical scientific computing workflow includes:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Defining all input parameters for every step of the computation;
\item
  Defining dependencies of computational tasks;
\item
  Storing some of the output data;
\item
  Post-processing these data files;
\item
  Performing data analysis on output.
\end{enumerate}

\href{https://github.com/callat-qcd/espressodb/}{\texttt{EspressoDB}} is
a programmatic object-relational data management framework implemented
in Python and based on the
\href{https://www.djangoproject.com}{\texttt{Django} web framework}.
\texttt{EspressoDB} was developed to streamline data management
workflows, centralize and guarantee data integrity, while providing
domain flexibility and ease of use.

The framework provided by \texttt{EspressoDB} aims to support the ever
increasing complexity of workflows of scientific computing at leadership
computing facilities (LCFs), with the goal of reducing the amount of
human time required to manage the jobs, thus giving scientists more time
to focus on science.

\hypertarget{features}{%
\section{Features}\label{features}}

Data integrity is important to scientific projects and becomes more
challenging the larger the project. In general, a \texttt{SQL} framework
type-checks data before writing to the database and controls
dependencies and relations between different tables to ensure internal
consistency. \texttt{EspressoDB} allows additional user-defined
constraints not supported by \texttt{SQL} (\emph{e.g.} unique
constraints using information across related tables). Once the user has
specified a set of conditions that entries have to fulfill for each
table, \texttt{EspressoDB} runs these cross checks for new data before
inserting them in the database.

\texttt{EspressoDB} also supports collaborative and open-data oriented
projects by leveraging and extending \texttt{Django}'s web hosting
component. In addition to providing a centralized data platform, it is
possible to spawn customized web pages which can be hosted locally or on
the world wide web\footnote{Depending on the configuration, it is
  possible to provide selected access for multiple users on different
  levels.}. \texttt{EspressoDB} simplifies creating projects by
providing default \texttt{Django} configurations that set up for
example, connections to the database and webpages to view associated
tables. For example, with the default setting, \texttt{EspressoDB}
spawns:

\begin{itemize}
\tightlist
\item
  Documentation views of implemented tables;
\item
  A project wide notification system;
\item
  Project specific Python interface guidelines which help writing
  scripts to populate the database;
\item
  Admin pages for interacting with data in a GUI.
\end{itemize}

Further views can be implemented to interact with data and use existing
Python libraries for summarizing and visualizing information. This
allows users to create visual progress updates on the fly and to
integrate the database information to the data-processing workflow,
significantly reducing the human overhead required due to improved
automation.

More details, usage instructions and examples are documented at
\href{https://espressodb.readthedocs.io}{espressodb.readthedocs.io}.

\hypertarget{use-case}{%
\section{Use case}\label{use-case}}

\href{https://github.com/callat-qcd/lattedb/}{\texttt{LatteDB}}, an
application of \texttt{EspressoDB} that is specialized to contain table
definitions for lattice quantum chromodynamics (LQCD) calculations and
analysis. \texttt{LatteDB} is currently being used by the
\href{https://a51.lbl.gov/~callat/webhome/}{CalLat Collaboration} in
their computations on Summit at the Oak Ridge Leadership Computing
Facility (\href{https://www.olcf.ornl.gov}{OLCF}) through DOE INCITE
Allocations \cite{incite:2019, incite:2020}. The website generated by
\texttt{LatteDB} used by CalLat can be found at
\url{https://ithems.lbl.gov/lattedb/}. A precursor to
\texttt{EspressoDB} and \texttt{LatteDB} was used to support a series of
LQCD projects \cite{Nicholson:2018mwc, Chang:2018uxx}.

Summit at OLCF is disruptively fast compared to previous generations of
leadership class computers. There are two challenges which are both
critical to address for near-exascale computers such as Summit, which
will become more important in the exascale era:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \emph{Efficient bundling and management of independent tasks}: LCFs
  prohibit the submission of millions of small tasks to their
  supercomputers (clogged queues, overtaxed service nodes etc.). It is
  imperative to have a task manager capable of bundling many tasks into
  large jobs while distributing the work to various components of the
  heterogeneous nodes;
\item
  \emph{Dependent task generation and data processing}: As an example,
  CalLat creates peta-bytes of temporary files that are written to the
  scratch file system, used for subsequent computations and ultimately
  processed down to hundred of tera-bytes that are saved for analysis.
  It is essential to track the status of these files in real-time
  (identify corrupt, missing, or purgeable files).
\end{enumerate}

Members of CalLat are addressing issue 1 through the creation of job
management software,
\href{https://github.com/evanberkowitz/metaq}{METAQ}
\cite{Berkowitz:2017vcp} and \texttt{MPI\_JM} \cite{Berkowitz:2018gqe;
Berkowitz:2017xna}. \texttt{LatteDB} is designed to address the
second issue. A future feature of \texttt{LatteDB} is integration with
\texttt{MPI\_JM}.

\hypertarget{acknowledgements}{%
\section{Acknowledgements}\label{acknowledgements}}

We thank Even Berkowitz, Arjun Gambhir, Ben HÃ¶rz, Kenneth McElvain and
Enrico Rinaldi for useful insights and discussions which helped in
creating \texttt{EspressoDB} and \texttt{LatteDB}. C.K. gratefully
acknowledges funding through the Alexander von Humboldt Foundation
through a Feodor Lynen Research Fellowship. The work of A.W-L. was
supported by the Exascale Computing Project (17-SC-20-SC), a joint
project of the U.S. Department of Energy's Office of Science and
National Nuclear Security Administration, responsible for delivering a
capable exascale ecosystem, including software, applications, and
hardware technology, to support the nation's exascale computing
imperative.

This research used resources of the Oak Ridge Leadership Computing
Facility, which is a DOE Office of Science User Facility supported under
Contract DE-AC05-00OR22725, with access and computer time granted
through the DOE INCITE Program.

\hypertarget{references}{%
\section{References}\label{references}}
