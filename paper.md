---
title: 'EspressoDB: A scientific database for managing high-performance computing workflow'
tags:
  - Python
  - Django
  - High-performance computing
  - Lattice QCD
authors:
  - name: Chia Cheng Chang
    orcid: 0000-0002-3790-309X
    affiliation: "1, 2, 3"
  - name: Christopher Körber
    orcid: 0000-0002-9271-8022
    affiliation: "2, 3"
  - name: André Walker-Loud
    orcid: 0000-0002-4686-3667
    affiliation: "3, 2, 4"
affiliations:
 - name: iTHEMS RIKEN, Wako, Saitama 351-0198
   index: 1
 - name: University of California, Berkeley, California 94720
   index: 2
 - name: Lawrence Berkeley National Laboratory, Berkeley, California 94720
   index: 3
 - name: Lawrence Livermore National Laboratory, Livermore, California 94550
   index: 4

date: 14 November 2019
bibliography: paper.bib

---

# Summary

Leadership computing facilities around the world support cutting-edge scientific research across a broad spectrum of disciplines including understanding climate change, combating opioid addiction, or simulating the decay of a neutron.
While the increase in computational power has allowed scientists to better evaluate the
underlying model, the size of these computational projects have grown to a point where
a framework is desired to facilitate with the management of the workflow.
A typical scientific computing workflow includes

1. defining all input parameters for every step of the computation,
2. defining dependencies of computational tasks
3. storing output of tasks to disk, and
4. performing data analysis on output.

[``EspressoDB``](https://github.com/callat-qcd/espressodb/) is a programmatic object-relational data management framework implemented in Python and based on the [``Django`` web framework](https://www.djangoproject.com).
``EspressoDB`` was developed to streamline data management workflows, centralize and guarantee data integrity, while providing domain flexibility and remaining light weight.
The [*Features* section](#features) summarizes ``EspressoDB``.

[``LatteDB``](https://github.com/callat-qcd/lattedb/) a version of ``EspressoDB`` that is specialized to contain table definitions for Lattice QCD calculations, is currently being used to manage the workflow of the 2019 INCITE project titled *The Proton's Structure and the Search for New Physics* [@incite:2019].
The corresponding website generated by ``LatteDB`` can be found at [https://ithems.lbl.gov/lattedb/](https://ithems.lbl.gov/lattedb/).
A precursor to ``EspressoDB`` and ``LatteDB`` was used to support a series of Lattice QCD projects
([@Nicholson:2018mwc], [@Chang:2018uxx], [@Berkowitz:2018gqe]).
The framework provided by ``EspressoDB`` aims to support the ever increasing workflow of scientific computing at leadership computing facilities, with the goal of giving scientists more time to focus on science.
The [*Use case* section](#use-case) presents how ``LatteDB`` is integrated in the INCITE project.

# Features

The main objective behind ``EspressoDB`` is to store vast amount of data and provide an easy to use framework which helps making informed decision fast.
The latter condition demands a that it possible to query the data and store relations between different datasets, e.g., an SQL based framework.
To ensure that this framework is accessible and users do not have to learn SQL to get started, ``EspressoDB`` makes use of an Object-Relational Mapping (ORM).
E.g., instead of having a (file based) table system, Python objects correspond to rows in this table.
Columns of such tables correspond to attributes of the objects.
Thus it is possible to filter for objects by their attributes or generate summary tables (``pandas.DataFrame``) within one line of code.
Furthermore, using an ORM allows to have the same interface independent of the backend.
It is possible to store data in a file based `SQLite` solution, or use more scalable options like `MySQL` or `Postgresql`.

``EspressoDB`` builds on top of Python's ``Django`` ORM framework.
``Django`` is part of many open-source projects and thus comes with a extensive documentation.
It is scalable, comes with reliable support and tests which manifests in the fact that commonly is used in industry projects (BitBucket, Instagram, Mozilla, NASA and many more).
One guiding principle of ``EspressoDB`` is to stay close to it's roots and therefore leverage the support coming with ``Django``.
This has the consequence that one can easily incorporate many of ``Django``'s extensions and find solutions to technical questions online.

On top of ``Django``, ``EspressoDB`` provides features important to scientific projects.

* The Base tables | EspressoDB is flexible.
* Automated views
* Automated docs
* Population framework
* Integrity checks | EspressoDB provides a data integrity framework.

One purpose of ``EspressoDB`` is to support collaborative and open-data oriented projects.
In addition of providing a centralized data platform, it is possible to, depending on the configuration[^1], to spawn customized web pages which can be viewed

* on a local machine only,
* on a local network or
* the world wide web.

On default, ``EspressoDB`` spawns documentation views of implemented tables, a project wide notification system, Python interface guidelines and admin pages for interacting with data in a GUI.
This interface can be set up [within three steps](https://espressodb.readthedocs.io/en/latest/Usage.html#tl-dr).
Further views can be implemented to interact with data and can utilize existing Python libraries to summarize and visualize information on the fly---thus automating workflows and providing progress updates in real time.

[^1]: Depending on the configuration, it is possible to provided selected access for multiple users.






# Use case

LatteDB is used to track data status of files on the remote location.

# Acknowledgements

The authors thank Even Berkowitz, Arjun Gambhir, Ben Hörz,  Kenneth McElvain and Enrico Rinaldi for useful insights and discussions which helped in creating ``EspressoDB`` and ``LatteDB``.
C.K. gratefully acknowledges funding through the Alexander von Humboldt Foundation through a Feodor Lynen Research Fellowship.

# References
